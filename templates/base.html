{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Expense Tracker</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!-- Inline fallback styles (used if external CSS 404 before collectstatic runs) -->
    <style>
      /* Minimal layout fallback */
      body{background:#f4f6f8;color:#0b0b0b;margin:0;padding:20px;font-family:Arial,Helvetica,sans-serif}
      .site{max-width:980px;margin:0 auto}
      .site-header{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
      h1{margin:0;font-size:24px}
      .panel{background:#fff;padding:16px;border-radius:10px;box-shadow:6px 6px 0 rgba(0,0,0,0.06)}
      .btn{display:inline-block;padding:8px 10px;background:#c7efd9;border-radius:8px;text-decoration:none;color:#000;font-weight:600}
      table{width:100%;border-collapse:collapse}
      td,th{padding:8px;border-bottom:1px solid #eee}
    </style>
  </head>
  <body>
    <div class="site container-lg">
      <header class="site-header d-flex align-items-center justify-content-between py-3">
        <div class="d-flex align-items-center gap-3">
          <h1 class="m-0">Expense Tracker</h1>
        </div>
        <div class="d-flex align-items-center gap-2">
          <a href="#" id="devs-btn" class="btn btn-sm">Developers</a>
        </div>
      </header>
      <main class="site-main mb-4">
        {% block content %}{% endblock %}
      </main>
      <footer class="site-footer mb-5 text-center">
        <div class="footer-top mb-2">&copy; Expense Tracker</div>
      </footer>
    </div>

    <!-- Bootstrap bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
      // Static image URLs
      const treesStatic = "{% static 'images/trees.png' %}";
      const nyanStatic = "{% static 'images/nyan-cat.gif' %}";

      // tiny fallback images (data URIs)
      const fallbackTree = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNgYAAAAAMAASsJTYQAAAAASUVORK5CYII='; // tiny PNG
      const fallbackNyan = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=='; // 1x1 gif

      async function resolveImage(path, fallback) {
        try {
          const resp = await fetch(path, {method: 'HEAD'});
          if (resp.ok) return path;
        } catch (e) {}
        return fallback;
      }

      document.getElementById('devs-btn').addEventListener('click', async function(e){
        e.preventDefault();
        const treesImg = await resolveImage(treesStatic, fallbackTree);
        const nyanImg = await resolveImage(nyanStatic, fallbackNyan);

        Swal.fire({
          title: 'Developers',
          html: `
            <div style="text-align:left">
              <strong>KEITH RENZ D. ROMBLON</strong><br>
              CAMILLE R. RAMILO<br>
              DAN RAINER H. CABABAN<br>
              KIERO R. ESPINOSA<br>
              JOHN WAYNE I. LAURIO<br>
              JERICHO GABRIEL P. TEQUILLO<br>
              MA. HIRAYA G. AGDA
              <hr>
              <p style="margin-top:8px;font-weight:600">Final project for CS ELECTIVE 2</p>
            </div>
          `,
          width: 600,
          padding: '3em',
          color: '#716add',
          background: `#fff url(${treesImg})`,
          backdrop: `rgba(0,0,123,0.4) url(${nyanImg}) left top no-repeat`,
        });
      });
    </script>
  </body>
</html>
